<?xml version="1.0"?>
<process-model model-name="sink_perso" code-language="C" tv-in-db="yes" tv-in-tb="yes">
<OPNET-info OPNET-release="12.0.A" OPNET-patchlevel="5" OPNET-model-data-version="10.7.A"/>
<attribute-assignments>
<assignment attribute-name="begsim intrpt" type="toggle" status="hidden" value="1"/>
<assignment attribute-name="doc file" type="string" status="hidden"/>
<assignment attribute-name="endsim intrpt" type="toggle" status="hidden"/>
<assignment attribute-name="failure intrpts" type="enumerated" status="hidden"/>
<assignment attribute-name="intrpt interval" type="toggle double" status="hidden"/>
<assignment attribute-name="priority" type="integer" status="hidden"/>
<assignment attribute-name="recovery intrpts" type="enumerated" status="hidden"/>
<assignment attribute-name="subqueue" type="compound" status="hidden">
<sub-object>
<attribute creation-mechanics="EMA" name="count" type="integer" value="1"/>
<attribute creation-mechanics="EMA" name="list" type="object list">
<object-list>
<sub-object/>
</object-list>
</attribute>
</sub-object>
</assignment>
<assignment attribute-name="super priority" type="toggle" status="hidden"/>
</attribute-assignments>
<interfaces>
<interface promoted-name="begsim intrpt" type="toggle" inherit-limits="yes" inherit-symbol-only="yes" inherit-comments="yes" inherit-units="yes" inherit-default-value="yes">
<attribute-names>
<![CDATA[
begsim intrpt
]]>
</attribute-names>
<properties type="toggle" auto-assign="no" symbolic-only="no">
<default-value value="0"/>
</properties>
</interface>
</interfaces>
<state-variables>
<![CDATA[
Stathandle	\bits_rcvd_stathandle;

Stathandle	\bitssec_rcvd_stathandle;

Stathandle	\pkts_rcvd_stathandle;

Stathandle	\pktssec_rcvd_stathandle;

Stathandle	\ete_delay_stathandle;

Stathandle	\bits_rcvd_gstathandle;

Stathandle	\bitssec_rcvd_gstathandle;

Stathandle	\pkts_rcvd_gstathandle;

Stathandle	\pktssec_rcvd_gstathandle;

Stathandle	\ete_delay_gstathandle;

]]>
</state-variables>
<temporary-variables>
<![CDATA[
Packet*		pkptr;
double		pk_size;
double		ete_delay;
]]>
</temporary-variables>
<states initial-state-id="11">
<state id="9" x="210" y="90">
<attribute name="name" type="string" value="DISCARD"/>
<attribute name="Exit Execs" type="textlist">
<value-text>
<![CDATA[
/* Obtain the incoming packet.	*/
pkptr = op_pk_get (op_intrpt_strm ());

/* Caclulate metrics to be updated.		*/
pk_size = (double) op_pk_total_size_get (pkptr);
ete_delay = op_sim_time () - op_pk_creation_time_get (pkptr);

/* Update local statistics.				*/
op_stat_write (bits_rcvd_stathandle, 		pk_size);
op_stat_write (pkts_rcvd_stathandle, 		1.0);
op_stat_write (ete_delay_stathandle, 		ete_delay);

op_stat_write (bitssec_rcvd_stathandle, 	pk_size);
op_stat_write (bitssec_rcvd_stathandle, 	0.0);
op_stat_write (pktssec_rcvd_stathandle, 	1.0);
op_stat_write (pktssec_rcvd_stathandle, 	0.0);

/* Update global statistics.	*/
op_stat_write (bits_rcvd_gstathandle, 		pk_size);
op_stat_write (pkts_rcvd_gstathandle, 		1.0);
op_stat_write (ete_delay_gstathandle, 		ete_delay);

op_stat_write (bitssec_rcvd_gstathandle, 	pk_size);
op_stat_write (bitssec_rcvd_gstathandle, 	0.0);
op_stat_write (pktssec_rcvd_gstathandle, 	1.0);
op_stat_write (pktssec_rcvd_gstathandle, 	0.0);

/* Destroy the received packet.	*/
op_pk_destroy (pkptr);


]]>
</value-text>
</attribute>
</state>
<state id="11" x="90" y="90">
<attribute name="name" type="string" value="INIT"/>
<attribute name="Enter Execs" type="textlist">
<value-text>
<![CDATA[
/* Initilaize the statistic handles to keep	*/
/* track of traffic sinked by this process.	*/
bits_rcvd_stathandle 		= op_stat_reg ("Traffic Sink.Traffic Received (bits)",			OPC_STAT_INDEX_NONE, OPC_STAT_LOCAL);
bitssec_rcvd_stathandle 	= op_stat_reg ("Traffic Sink.Traffic Received (bits/sec)",		OPC_STAT_INDEX_NONE, OPC_STAT_LOCAL);
pkts_rcvd_stathandle 		= op_stat_reg ("Traffic Sink.Traffic Received (packets)",		OPC_STAT_INDEX_NONE, OPC_STAT_LOCAL);
pktssec_rcvd_stathandle 	= op_stat_reg ("Traffic Sink.Traffic Received (packets/sec)",	OPC_STAT_INDEX_NONE, OPC_STAT_LOCAL);
ete_delay_stathandle		= op_stat_reg ("Traffic Sink.End-to-End Delay (seconds)",		OPC_STAT_INDEX_NONE, OPC_STAT_LOCAL);

bits_rcvd_gstathandle 		= op_stat_reg ("Traffic Sink.Traffic Received (bits)",			OPC_STAT_INDEX_NONE, OPC_STAT_GLOBAL);
bitssec_rcvd_gstathandle 	= op_stat_reg ("Traffic Sink.Traffic Received (bits/sec)",		OPC_STAT_INDEX_NONE, OPC_STAT_GLOBAL);
pkts_rcvd_gstathandle 		= op_stat_reg ("Traffic Sink.Traffic Received (packets)",		OPC_STAT_INDEX_NONE, OPC_STAT_GLOBAL);
pktssec_rcvd_gstathandle 	= op_stat_reg ("Traffic Sink.Traffic Received (packets/sec)",	OPC_STAT_INDEX_NONE, OPC_STAT_GLOBAL);
ete_delay_gstathandle		= op_stat_reg ("Traffic Sink.End-to-End Delay (seconds)",		OPC_STAT_INDEX_NONE, OPC_STAT_GLOBAL);
]]>
</value-text>
</attribute>
<attribute name="status" type="toggle" value="1"/>
</state>
</states>
<transitions>
<transition source-state-id="9" destination-state-id="9" label-x="175" label-y="203">
<path-point x="214" y="117"/>
<path-point x="245" y="157"/>
<path-point x="230" y="109"/>
<attribute name="name" type="string" value=" "/>
</transition>
<transition source-state-id="11" destination-state-id="9" label-x="156" label-y="89">
<path-point x="115" y="89"/>
<path-point x="196" y="89"/>
<attribute name="name" type="string" value="tr_12"/>
<attribute name="color" type="color" value="gray3"/>
</transition>
</transitions>
<local-statistics>
<statistic name="End-to-End Delay (seconds)" group="Traffic Sink" dimension="0" capture-mode="bucket/default total/sample mean" display-mode="linear" low-bound="0.0" high-bound="disabled">
<description>
<![CDATA[
End-to-end delay of packets received by the traffic sink in this node.
]]>
</description>
</statistic>
<statistic name="Traffic Received (bits)" group="Traffic Sink" dimension="0" capture-mode="bucket/default total/sum" display-mode="linear" low-bound="0.0" high-bound="disabled">
<description>
<![CDATA[
Traffic received (in bits) by the traffic sink in this node.
]]>
</description>
</statistic>
<statistic name="Traffic Received (bits/sec)" group="Traffic Sink" dimension="0" capture-mode="bucket/default total/sum_time" display-mode="linear" low-bound="0.0" high-bound="disabled">
<description>
<![CDATA[
Traffic received (in bits/sec) by the traffic sink in this node.
]]>
</description>
</statistic>
<statistic name="Traffic Received (packets)" group="Traffic Sink" dimension="0" capture-mode="bucket/default total/sum" display-mode="linear" low-bound="0.0" high-bound="disabled">
<description>
<![CDATA[
Traffic received (in packets) by the traffic sink in this node.
]]>
</description>
</statistic>
<statistic name="Traffic Received (packets/sec)" group="Traffic Sink" dimension="0" capture-mode="bucket/default total/sum_time" display-mode="linear" low-bound="0.0" high-bound="disabled">
<description>
<![CDATA[
Traffic received (in packets/sec) by the traffic sink in this node.
]]>
</description>
</statistic>
</local-statistics>
<global-statistics>
<statistic name="End-to-End Delay (seconds)" group="Traffic Sink" dimension="0" capture-mode="bucket/default total/sample mean" display-mode="linear" low-bound="0.0" high-bound="disabled">
<description>
<![CDATA[
End-to-end delay of packets received by traffic sinks across all nodes.
]]>
</description>
</statistic>
<statistic name="Traffic Received (bits)" group="Traffic Sink" dimension="0" capture-mode="bucket/default total/sum_time" display-mode="linear" low-bound="0.0" high-bound="disabled">
<description>
<![CDATA[
Traffic received (in bits) by the traffic sinks across all nodes.
]]>
</description>
</statistic>
<statistic name="Traffic Received (bits/sec)" group="Traffic Sink" dimension="0" capture-mode="bucket/default total/sum_time" display-mode="linear" low-bound="0.0" high-bound="disabled">
<description>
<![CDATA[
Traffic received (in bits/sec) by the traffic sinks across all nodes.
]]>
</description>
</statistic>
<statistic name="Traffic Received (packets)" group="Traffic Sink" dimension="0" capture-mode="bucket/default total/sum_time" display-mode="linear" low-bound="0.0" high-bound="disabled">
<description>
<![CDATA[
Traffic received (in packets) by the traffic sinks across all nodes.
]]>
</description>
</statistic>
<statistic name="Traffic Received (packets/sec)" group="Traffic Sink" dimension="0" capture-mode="bucket/default total/sum_time" display-mode="linear" low-bound="0.0" high-bound="disabled">
<description>
<![CDATA[
Traffic received (in packets/sec) by the traffic sinks across all nodes.
]]>
</description>
</statistic>
</global-statistics>
<comments>
<![CDATA[
General Process Description: 
---------------------------- 
The sink process model accepts packets from any number of sources and 
discards them regardless of their content or format.
 
ICI Interfaces: 
-------------- 
None 

Packet Formats: 
--------------- 
None 

Statistic Wires: 
---------------- 
None 

Process Registry: 
----------------- 
Not Applicable

Restrictions: 
------------- 
None
]]>
</comments>
</process-model>
